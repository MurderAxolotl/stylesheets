/* ==UserStyle==
@name           Unified Spotify
@namespace      github.com/MurderAxolotl
@license        GNU GPLv3
@version        1.18.5
@description    Brings a new, unified UI to Spotify
@author         Axo
@preprocessor   stylus

@var checkbox my_pc_is_shit            "I'M LAGGING! HELP!"       0
@var checkbox hide_recs                "HIDE RECOMMENDATIONS"     0
@var checkbox hide_spCon_bottom        "HIDE SPOTIFY CONNECT BAR" 0
@var checkbox hide_footer              "HIDE FOOTER"              1
@var checkbox hide_install_nags        "HIDE INSTALL NAGS"        0
@var checkbox not_an_idiot             "HIDE HELP LINKS"          0
@var checkbox minimal_floating_header  "MINIMAL FLOATING HEADER"  1
@var checkbox hide_notification_button "HIDE NOTIF BELL"          1
@var checkbox hide_playlist_preview    "HIDE PLAYLIST PREVIEW"    1
@var checkbox webshell                 "WS MODE"                  0
@var checkbox enable_pointless_things  "SHOW USELESS THINGS"      0
@var checkbox grayscale_player_gif     "GRAYSCALE PLAYING GIF"    1
@var checkbox hide_dj_card             "[BETA] HIDE DJ CARD"      0
@var select   home_mode                "HOME ITEMS"               {
																	"default:EVERYTHING": "default",
																	"preset_1:MF/SOUNDTRACK/RECENT": "preset_1",
																	"preset_2:MF/RECENT/PLAYLISTS": "preset_2",
																	"preset_3:RECENT/PLAYLISTS": "preset_3",
																	"preset_4:PLAYLISTS": "preset_4",
																	"musiconl:MUSIC ONLY": "music_only",
																	"monr:MUSIC, NO RADIO": "music_only_no_radios",
																	"tpr:THEO'S PRESET": "theos_preset"
																  }
@var select   hide_sb                  "SCROLLBAR MODE"           {"use_theme:THEMED": "styled", "spotify:DEFAULT": "spotify", "hidden:HIDDEN": "hidden"}
@var checkbox use_custom_theme_color   "USE CUSTOM COLORS"        1
@var color    custom_theme_color       "ACCENT COLOUR"            #9b6ef4
@var color    custom_inactive_colour   "INACTIVE TOGGLE COLOUR"   rgb(133,133,133)
@var color    ct_active_song           "ACTIVE TRACK COLOUR"      #1c1e26
@var color    background_colour        "[BETA] UI BACKGROUND"     hsl(227, 15%, 6%)
@var color    modal_popup_colour       "[BETA] POPUP UI COLOUR"   hsl(227, 15%, 15%)
@var color    chip_colour              "[BETA] CHIP COLOUR"          hsl(227, 19%, 11%)

==/UserStyle== */
@-moz-document domain("open.spotify.com") {
	if not my_pc_is_shit{
		/* THIS CAN BE INCREDIBLY LAGGY */
		.encore-dark-theme, .encore-dark-theme .encore-base-set {
			--background-base: background_colour!important;
			--background-highlight: lighten(background_colour, 5)!important;
			--background-press: #000;
			--background-elevated-base: lighten(background_colour, 5)!important;
			--background-elevated-highlight: lighten(background_colour, 5)!important;
			--background-elevated-press: lighten(background_colour, 10)!important;
			--background-tinted-base: #ffffff1a;
			--background-tinted-highlight: #ffffff24;
			--background-tinted-press: #ffffff36;
			--text-base: #fff;
			--text-subdued: #b3b3b3;
			--text-negative: #f3727f;
			--text-warning: #ffa42b;
			--text-announcement: #4cb3ff;
			--essential-base: #fff;
			--essential-subdued: #7c7c7c;
			--essential-negative: #ed2c3f;
			--essential-warning: #ffa42b;
			--essential-announcement: #4cb3ff;
			--decorative-base: #fff;
			--decorative-subdued: #292929;
		}

		.encore-internal-color-text-base {
			--text-base: #fff
		}
	}

	/* If custom colours are enabled, override Spotify's stuff here */
	if (not my_pc_is_shit) and use_custom_theme_color {
		.encore-dark-theme, .encore-dark-theme .encore-base-set {
			--text-bright-accent: custom_theme_color!important;
			--text-positive: custom_theme_color!important;
			--essential-bright-accent: custom_theme_color!important;
			--essential-positive: custom_theme_color!important;
		}
	}

	if my_pc_is_shit {
		/* Shotgun blast disable all transitions x3 */
		* {
			transition: none!important;
			animation-duration: 0s!important
		}
		div[data-testid="playback-progressbar"] div[data-testid="progress-bar"] div[data-testid="progress-bar-background"] div div {
			transition: none!important
		}
	}

    /*   Spotify Web Player   */
    /* Hide premium promotions */
    .html,
    .spotify__container--is-web {
        overflow-x: hidden!important
    }
    .Upqw01TOXETOmR5Td7Dj,
    .eCtSle,
    .Foyk_HJx16yh22JYmQ56 .ATUzFKub89lzvkmvhpyE,
 	button[aria-label="Download"] {
        display: none
    }

    .InvalidDropTarget .ATUzFKub89lzvkmvhpyE,
    .b2KVTiBUcXV1kT0OjL2p .ATUzFKub89lzvkmvhpyE {
        transition: all 1s;
    }
    .InvalidDropTarget .ATUzFKub89lzvkmvhpyE:hover,
    .b2KVTiBUcXV1kT0OjL2p:hover .ATUzFKub89lzvkmvhpyE:hover {
        transition: all 1s;
    }
	a[href="https://www.spotify.com/premium/?ref=web_loggedin_upgrade_menu"] {
		display: none!important
	}

    if hide_sb==hidden {
        .os-scrollbar-vertical {
            display: none
        }
    }
    else {
        .os-scrollbar-vertical {
            width: 5px!important;
            border-radius: 5px 5px!important
        }

        if hide_sb==styled {
            .os-scrollbar-handle {
                width:5px!important;
                border-radius: 5px 5px!important;

                if use_custom_theme_color {
                    background: custom_theme_color!important;
                    filter: opacity(0.5)!important

                }
            }
        }
    }

	/* Expand user PFP */
	figure[data-testid="user-widget-avatar"] {
		scale: 1.5
	}

	/* Placeholder pfps in comments */
	div[data-testid="placeholder-wrapper"] svg {
		color: white
	}

	div[data-testid="placeholder-wrapper"] {
		border: 1px solid #666
	}

    /* Lyrics */
    ._EzvsrEJ47TI8hxzRoKx, .RFThkjLuWfPUO9shrMOZ {
        background: background_colour!important
    }

	/* Lyrics - separate div which has the variables. For some GOD DAMN REASON. ***AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA*** */
	if use_custom_theme_color {
		.lofIAg8Ixko3mfBrbfej {
			--lyrics-color-active: custom_theme_color!important;
			--lyrics-color-messaging: custom_theme_color!important;
			--lyrics-color-inactive: hsl(custom_theme_color) - hsl(0,45,35)!important;
		}
	}

	.aeO5D7ulxy19q4qNBrkk {
		filter: brightness(0.25)
	}

    ._Wna90no0o0dta47Heiw::after, .cLkUmr {
        background: none!important
    }

    ._Wna90no0o0dta47Heiw {
        top: 25vh
    }

    .O7ooKKJG0MArEwDgD6IV, .hS_lrRHiW4BSWL8WcE8Q {
        display: none
    }

    .BXlQFspJp_jq9SKhUSP3 {
        text-align: center!important
    }

    /* Hides sponsors */
    .sponsor-text,
    .sponsor-logo__image {
        display: none!important
    }

    .eFyQzR {
        display:none
    }

	/* Top of the UI */
	.R69APjfNV0o9tAbfrWZf, .obd_bH64Snp1npdw29XM {
		background: chip_colour!important
	}

	button[aria-label="Friend Activity"] {
		display: none!important
	}

    /* Top bar */
    .S4OmZ_IZexmZ5dasPqW5 {
        background: transparent!important;
    }

    .coBkWVskipFo8KxLKief {
        background: background_colour!important
    }

    /* Icons */
    .bMBuKn path, .bjlVXn path, .cNvoOe path, .ivomLs path {
        fill: black!important
    }

    .mkQEqlUoJ9kghcMfT49m .os-scrollbar, .mkQEqlUoJ9kghcMfT49m div.os-scrollbar, ._iSFa0Kl_AlpaG8l_VLJ, .PkOz5g82CaoKk1J3GX0e {
        display: none!important
    }

	/* Modal popups */
	.uUYNnjSt8m3EqVjsnHgh, .dbKIqeJaR5jYCnOeeDJt, .encore-light-theme,
 	div[aria-label="Edit details"] div[data-testid="playlist-edit-details-modal"]
	{
		background: modal_popup_colour
	}

	/* Modal disclaimers */
	div[aria-label="Edit details"] div[data-testid="playlist-edit-details-modal"] p[data-encore-id="text"] {
		display: none
	}

	/* Reposition modal buttons */
	div[aria-label="Edit details"] div[data-testid="playlist-edit-details-modal"] button[data-encore-id="buttonPrimary"] {
		padding-top:45px
	}

	/* Artist info */
	.mpdgC9UTkN5_fMm1pFiz:not(:has(div[data-testid="action-bar"])) {
		background-color: modal_popup_colour
	}

	/* It's only a matter of time berfore this breaks, but for now... it works. somehow. */
	/* I THINK this is the buttons */
	.U_nX_1rJoqQSWPJRE6zb  {
		background: lighten(modal_popup_colour, 5)!important
	}

	.encore-light-theme button {
		color: white
	}

    /* PLAYLIST UI AND PLAYER UI */
    .rezqw3Q4OEPB1m4rmwfw > .contentSpacing,
    .qJOhHoRcFhHJpEQ2CwFT,
    section,
    .main-view-container__scroll-node-child,
    .HsbczDqu9qjcYr7EIdHR,
    .BL__GuO2JsHMR6RgNfwY > .contentSpacing,
    .gHImFiUWOg93pvTefeAD.xYgjMpAjE5XT05aRIezb,
    .gHImFiUWOg93pvTefeAD,
    .xYgjMpAjE5XT05aRIezb,
    .contentSpacing.jzhwZKbfx4vrC_MYd_7c.QyANtc_r7ff_tqrf5Bvc.Shelf,
    .E4q8ogfdWtye7YgotBlN.contentSpacing, .QuHe04rU4bj0Z5U9E2Tk, .UvXqRORKQr_N3jlgGTcS, .ifVI2CEdOZGgMWIUN2Cw, .jtqtOeRP46XAlHWx4C0D,
    .ylBRlfNqGnzVa4kjUQGP, .ZbDMGdU4aBOnrNLowNRq, .IkRGajTjItEFQkRMeH6v,
    .udArIAqnfUQPQew2VAns, ._W_0W9Uld1vxrRfsgdQR , .paiZmlAHHhmZonuGJRAr, .HjPqU_UW2egr14mRSom9, .fFvRIGtMIgsOLVSq_JNS, .scnRZypJsyXH1tjPg6uM > div,
    .XiVwj5uoqqSFpS4cYOC6, .main-view-container__mh-footer-container,
    ._2ajKWDiy6YvJu5wo8I1g,
    .paiZmlAHHhmZonuGJRAr, .lHJd4oSttKLxkxuoZ0Lr, .wM72343CksOCaL3bZvKK,
    .EmeHQXR87mUskYK6xEde, .yvZooOj0rpfRS__cAUCo, .R69APjfNV0o9tAbfrWZf, .obd_bH64Snp1npdw29XM,
	.YourLibraryX > div, .rezqw3Q4OEPB1m4rmwfw, .gKtc3TdowDTXBaVESi1D, .Rz6JI4bCxJVeSWe6LtEX, .fEvxx8vl3zTNWsuC8lpx, .qG4q41T8PJl0SkVgUeJc,
	.R2w_sH83CJU9Yhnu0xyt, .CU0wnmWejIvyEsRRtSac, .PiyAiXdQULEnWAHP0tu1, .NIEO4GCY9P49NrtTWlhP
    {
        background: background_colour
    }

	/* Artist pages without an actual image */
	section[data-testid="artist-page"] div div[style*="background-color: rgb("] {
		background: transparent!important
	}

	.DuvrswZugGajIFNXObAr .epWhU7hHGktzlO_dop6z {
		background: custom_theme_color!important
	}

	/* Fix weird UI issues from the above block */
	.contentSpacing.O0AN8Ty_Cxd4iLwyKATB, .CmR9tHJ5ta6oWJlKBm3k, .CmR9tHJ5ta6oWJlKBm3k, span[data-encore-id="text"] {
		background: transparent!important
	}

	/* "By uploading an image"... */
	.g4NoSm4nlTuArQvfAaDa, .zGbjZMZ1DTx4futEbN9l {
		display: none
	}

	button[data-testid="playlist-edit-details-save-button"] {
		top:10px
	}

	.JaGLdeBa2UaUMBT44vqI, .c0CddR8wF7kDxvU6uM8B, .dMhJaxli87_22jb_3d9x {
		background: chip_colour
	}

	.iyhPyoc2dxd1Eno74TCO {
		background-color: chip_colour
	}

	/* Profile details */
	.aM3plU4zzDqjWlvUHGYb, .so0bdX3oZH6YW5_nGxIR {
		background: background_colour
	}

	/* Verified artist */
	.CmR9tHJ5ta6oWJlKBm3k, .uRaGTNlhRgP6shlQgYLz {
		display: none
	}

	/* Hides the gradient on genre pages */
	.us5p2PlqI8IJvxWYakKj {
		display: none
	}

	/* Ticket sale things */
	.XgeTnLs82tTjczDR6oKn, .IUWOW7ZOUwEs57jTIQRP {
		background: chip_colour!important
	}

	/* Search Dropdown */
	#search-dropdown *, .SjhDNg4bQRQmIJAba47Z {
		background: background_colour!important
	}

	.SjhDNg4bQRQmIJAba47Z:hover {
		background: chip_colour!important
	}

	div[data-testid="top-result-card"] div {
		background: transparent
	}

	.UnwG2v9ISmcUhnjKj22Y .jVBuxI  {
		background: chip_colour!important
	}

	/* Home screen carousels */
	div[role="presentation"]:has(div[data-carousel-gridlist-item="true"]) {
		background: background_colour!important;
	}

	div[style="--scrollAnimationRangeStart: 10px; --scrollAnimationRangeEnd: 60px;"] {
		--carousel-start-chevron-gradient: transparent!important
	}

	/* Home screen playlist buttons */
	section[aria-label*="Good "] div div:has(div[draggable]) {
		background: chip_colour
	}

	/* Home screen floaty chip container thingymabob */
	.MViMHJvcIZ6RxUXEeLSf, .CEB3nzyniIFOx1yM1eYy, .aBTcK0jHBextE7fGnKiw {
		background-color: background_colour;
		filter: opacity(1)!important
	}

	/* ^ that thing's chips */
	button[class*="LegacyChip__LegacyChipComponent"][aria-checked="false"] {
		background: darken(chip_colour, 50%)
	}

	button[class*="LegacyChip__LegacyChipComponent"][aria-checked="true"] span[class*="LegacyChipInner__ChipInnerComponent"] {
		background: lighten(chip_colour, 25%);
		color: white
	}

	/* Home screen top gradient */
	main[aria-label*="Spotify"] div[style*="background-color: rgb("] {
		background-color: transparent!important;
	}

    /* CONNECT TO DEVICE PANE */
    .W3E0IT3_STcazjTeyOJa, .h0XG5HZ9x0lYV7JNwhoA, .ffFwfKcPDbmAPLXzxzKq, .W3E0IT3_STcazjTeyOJa, .fNXmHtlrj4UVWmhQrJ_5, div[aria-labelledby="device-picker-header"], .icNf66tgG3uxDMbCCIaN, .AAdBM1nhG73supMfnYX7 {
        background: background_colour!important
    }

    .tippy-arrow, .mkQEqlUoJ9kghcMfT49m .os-scrollbar,
    .XiVwj5uoqqSFpS4cYOC6, .facDIsOQo9q7kiWc4jSg, .main-view-container__mh-footer-container,
    .qSTDtICR1fiIGRni1cwy, .YIJxiTuPgMQav316cRqP,
    .mjprSb2e1tKJpqwvgFSh, .XdJAEkP3WXzUL5URB0ZX
    {
        color: hsl(227, 15%, 15%)!important
    }

    /* Connect to a device screen */
    .qSTDtICR1fiIGRni1cwy, .YIJxiTuPgMQav316cRqP,
    .mjprSb2e1tKJpqwvgFSh, .XdJAEkP3WXzUL5URB0ZX,
 	div[style="margin-right: 0px; margin-bottom: 0px; margin-left: 0px; top: 0px; right: auto; left: 0px; width: calc(100% + 0px); padding: 0px;"]:has(div[aria-labelledby="listrow-title-device-picker-header"]) {
        background: background_colour
    }

	/* Other sidebars */
	aside[id="Desktop_PanelContainer_Id"] div[style="margin-right: 0px; margin-bottom: 0px; margin-left: 0px; top: 0px; right: auto; left: 0px; width: calc(100% + 0px); padding: 0px;"],
 	div[id="Desktop_LeftSidebar_Id"] div[data-overlayscrollbars-viewport="scrollbarHidden overflowXHidden overflowYHidden"] {
		background: background_colour
	}

    .T1xI1RTSFU7Wu94UuvE6, .hIFR8WDm_54EEIa1gwpC {
        filter: opacity(1)!important;
        background: hsl(227, 15%, 15%)!important
    }

    /* PLAYLIST SELECTION UI */
    .main-view-container__scroll-node .os-content,
    .L9xhJOJnV2OL5Chm3Jew,
    .oNjdJbGQ9ypf7KR0nYJW,
    .ibrRlYShsgThsh8VNS8Q,
    *[data-overlayscrollbars-viewport="scrollbarHidden overflowXHidden overflowYScroll"]{
        background: background_colour!important
    }

    /* Foreground elements on the right sidebar */
    .LunqxlFIupJw_Dkx6mNx,
    .oaNVBli46GtVjaQKB15g, .qbOrWcMUhSri1nPkZLQA,
    .l2PpoXJouAgqFCuNT3iB, .QkOkUShDYWFx5Cz40Bcn,
    .GTmlByXpJj7V6AwVq0Vk,
    .Ai_McRq9wJEYK21w8nX_, .IgTMXVbZtqtZwu3GZASd{
        background: hsl(227, 15%, 10%)!important
    }

    /* SIDEBAR */
    .tUwyjggD2n5KvEtP5z1B, .Ozitxbqs1vcOukDz3GDw {
        background: hsl(227, 15%, 5%)!important
    }

    .McwcCfBLSuXa5UDU1IMw {
        display: none
    }

    .jb9xD5ECTqKFK02qe3HZ, .g3f_cI5usQX7ZOQyDtA9, .Z35BWOA10YGn5uc9YgAp {
        background: transparent!important
    }

	/* Removes the gray from placeholder icons (mostly folders) */
	div:has(div[class="RowButton-sc-xxkq4e-0 cRPTAY"]) div[class*="Areas__HeaderSideArea"] div div,
 	li div[data-encore-id="card"] div div:has(svg[data-testid="card-image-fallback"]) {
		background: none!important
	}

    /* CONTEXT MENUS */
    #context-menu,
    ul[role="menu"],
 	#context-menu:has(div[data-testid="hover-or-focus-tooltip"]) * {
        background: modal_popup_colour!important
    }

    button.wC9sIed7pfp47wZbmU6m:hover {
        background: lighten(modal_popup_colour, 5)!important
    }

    /* PLAYER UI */
    .OCY4jHBlCVZEyGvtSv0J {
        background: hsl(227, 15%, 5%)!important
    }

    /* HEADERS ON PLAYLISTS */
    .E4q8ogfdWtye7YgotBlN, .CeSZLCa3sD6XCrx_ld6S, .VCH3TJP5s27cQwnxWKnA {
        background: background_colour!important;
    }

    .CoLO4pdSl8LGWyVZA00t {
        background: linear-gradient(180deg, hsl(217, 18%, 6%) 0%, hsla(288, 14%, 7%, 0) 100%)!important
    }

    .bk509U3ZhZc9YBJAmoPB,
    .rsaJ_PD5Wsx9a9H2IyV_,
    #context-menu,
    .ErSD7TARZzk270zuVjoi,
    .HVCCFeUiHVwZVv74p34a .os-viewport-native-scrollbars-invisible,
    .hwP4Oum2PB76b8jigI {
        background: background_colour!important;
    }

	/* Playlist items and queue items */
	div[id="queue-panel"] div[data-flip-id*="spotify:track:"] div[data-encore-id="listRow"] div[class*="RowButton"],
	div[role="row"]:has(div[data-testid="tracklist-row"]),
 	div[role="row"]:has(div[data-testid="tracklist-row"]) div[data-testid="tracklist-row"]{
		transition: 0.3s;
		border-radius: 6px
	}

	div[id="queue-panel"] div[data-flip-id*="spotify:track:"]:not(:hover) div[data-encore-id="listRow"] div[class*="RowButton"] {
		background: background_colour
	}

	div[id="queue-panel"] div[data-flip-id*="spotify:track:"]:hover div[data-encore-id="listRow"] div[class*="RowButton"],
	div[role="row"]:has(div[data-testid="tracklist-row"]):hover,
 	div[role="row"]:has(div[data-testid="tracklist-row"]):hover div[data-testid="tracklist-row"] {
		background: chip_colour!important;
	}

	div[role="row"][aria-selected="true"]:has(div[data-testid="tracklist-row"]),
 	div[role="row"][aria-selected="true"]:has(div[data-testid="tracklist-row"]) div[data-testid="tracklist-row"]{
		background: lighten(chip_colour, 15%)!important
	}

	div[id="queue-panel"] div[data-flip-id*="spotify:track:"]:hover div[data-encore-id="listRow"] div[class*="RowButton"] {
		background: lighten(chip_colour, 5%)!important
	}

	div[id="queue-panel"] div[data-flip-id*="spotify:track:"] div[data-encore-id="listRow"] div[class*="Areas__Header"] {
		z-index: 2;
	}

	/* Chips */
	/* Filter chip */
	div[id="Desktop_LeftSidebar_Id"] div[aria-label="Filter options"] div[class="react-aria-ListBoxItem"] div[class*="ChipClear__ChipClearComponent"] {
		background: chip_colour
	}
	div[id="Desktop_LeftSidebar_Id"] div[aria-label="Filter options"] div[data-carousel-item="true"] div[aria-checked="true"] span {
		background: lighten(chip_colour, 15%)!important;
	}
	div[id="Desktop_LeftSidebar_Id"] div[aria-label="Filter options"] div[data-carousel-item="true"] div[aria-checked="true"] * {
		color: white!important;
	}

	div > *[class*="LegacyChipInner"]  {
		background: chip_colour!important;
	}

	/* Equalizer */
	.FulR95cAh4QPdw6wUeRw {
		background: chip_colour!important
	}

	/* Setting chips */
	.zrvvPyoxE6wQNqnu0yWA {
		background: chip_colour!important
	}

	/* Containers */
	.L1qvKGTZ3gTJuTMowxPQ {
		background: chip_colour!important
	}

	/* Playerbar tweaks */
	.vW9NFcNIj8useE43Vx9G:before, .E1ikFpkPVaoLplbQdrTP:after {
		display: none
	}

	/* Floating column header */
	header[aria-label="Top bar and user menu"] div {
		background: chip_colour!important;
	}

	section[data-testid="artist-page"] div:has(div[class*="encore-text-title-small"]) {
		top: 0px;
		box-shadow: none
	}

	/* Togglable features, most of them anyways. Some are scattered about, good luck! */

	if minimal_floating_header {

		header[aria-label="Top bar and user menu"] {
			display: none;
			background: none!important
		}

		div[data-testid="playlist-tracklist"] div[style="top: 64px;"],
 		section ul[class*="NavBarList__NavBarListElement-sc-"] {
			top: 0px!important;
			background: background_colour!important;
		}

		/* Same thing as above, but.. for artists... grahhhh */
		section[data-testid="artist-page"] div[style="top: 64px;"][role="presentation"] {
			top: 0px!important; /* Fun fact: this matches the default behavior. FOR SOME FUCKING REASON i'm going insane help */
			/*top: 42px!important;*/
			background: background_colour!important
		}
	}

	if grayscale_player_gif {
		img[src*="https://open.spotifycdn.com/cdn/images/equaliser-green"],
		img[src*="https://open.spotifycdn.com/cdn/images/equaliser-animated"] {
			filter: saturate(0)!important
		}
	}

	if hide_notification_button {
		button[data-testid="whats-new-feed-button"] {
			display: none
		}
	}

	/* Hides the "shortslike" playlist preview button */
	if hide_playlist_preview {
		button[data-testid="watch-feed-entity-button"] {
			display: none
		}
	}

	/* WS mode removes some buttons I don't need. Likely not useful for other people */
	/* Explicity hides:
 		- Preferences button in dropdown
		- Create playlist button on sidebar
		- Now playing button on bottom bar
	*/
	if webshell {
		a[href="/preferences"], button[aria-label="Create"], aside[data-testid="now-playing-bar"] button[data-testid="control-button-npv"] {
			display: none!important
		}

		*[aria-labelledby="card-title-spotify:playlist:6mIujsSdtPlcHKwJOUsxmL-0 card-subtitle-spotify:playlist:6mIujsSdtPlcHKwJOUsxmL-0"],
 		*[aria-labelledby="card-title-spotify:playlist:6mIujsSdtPlcHKwJOUsxmL-0"],
		aside[data-testid="now-playing-bar"] button[data-testid="fullscreen-mode-button"],
 		.WtC1lGbmQRplD6JBhNFU {
			display: none!important
		}
	}

	if not_an_idiot {
		a[href="https://support.spotify.com/"],
		.E912cqRfb05FrRPFKDZ_ {
			display: none!important
		}
	}

    if hide_footer {
        *[class*="Footer__StyledFooter-sc"], .esBjsh {
            display:none
        }
    }

    if not hide_footer {
        *[class*="Footer__StyledFooter-sc"], .esBjsh {
            background: background_colour!important;
        }
    }

	if hide_install_nags {
		.e-91000-button--leading, a[href="https://spotify.com/download"], .L1qvKGTZ3gTJuTMowxPQ {
			display: none!important
		}

		/* Disables buttons in the settings menu. These bring up the nag */
		select[id=":r112:"], .FulR95cAh4QPdw6wUeRw {
			filter: opacity(0.5);
			cursor:no-drop;
			pointer-events: none;
		}

		.JWYoNAyrIIdW30u4PSGE:has(input[id=":r113:"]) {
			filter: opacity(0.4);
			cursor:no-drop;
			pointer-events: none;
		}
	}

	if hide_dj_card {
		div[data-carousel-gridlist-item="true"]:has(div[aria-labelledby="card-title-spotify:playlist:37i9dQZF1EYkqdzj48dyYq-6"]),
 		div[aria-labelledby*="card-title-spotify:playlist:37i9dQZF1EYkqdzj48dyYq-1"],
 		div[data-carousel-gridlist-item="true"]:has(div[aria-labelledby*="card-title-spotify:playlist:37i9dQZF1EYkqdzj48dyYq-1"]) {
			display: none!important
		}
	}

	if not enable_pointless_things {
		a[href="/preferences"] {
			display: none!important
		}
	}

	/* Home declutter yee fucking haw */
	if home_mode == default {
		/* No actions need to be taken */
	}

	if home_mode == preset_1 or home_mode == preset_2 or home_mode == preset_3 or home_mode == preset_4 {
		/* Only shows Made for you, Soundtrack your day, Recently Played, Playlists */

		section[data-testid="component-shelf"][aria-label="Your top mixes"],
		section[data-testid="component-shelf"][aria-label="Jump back in"],
		section[data-testid="component-shelf"][aria-label="Inspired by your recent activity Based on your recent listening"],
		section[data-testid="component-shelf"]:has(a[href="/section/0JQ5DAnM3wGh0gz1MXnu3J"]),
		section[data-testid="component-shelf"][aria-label="Non-stop music based on your favorite songs and artists. Recommended Stations"],
		section[data-testid="component-shelf"][aria-label="Episodes you might like"],
		section[data-testid="component-shelf"][aria-label="Brand new music from artists you love. New releases for you"],
 		section[data-testid="component-shelf"]:has(div[data-testid="grid-container"]) {
			display: none
		}
	}

	if home_mode == preset_2 or home_mode == preset_3 or home_mode == preset_4 {
		/* Only shows Made for you, Recently Played, Playlists */

		section[data-testid="component-shelf"][aria-label*="Soundtrack your "] {
			display: none
		}
	}

	if home_mode == preset_3 or home_mode == preset_4 {
		/* Only shows: Recently Played, Playlists */

		section[data-testid="component-shelf"][aria-label*="Made For "] {
			display: none
		}
	}

	if home_mode == preset_4 {
		/* Only shows playlists */

		section[data-testid="component-shelf"][aria-label="Recently played"] {
			display: none
		}
	}

	if home_mode == music_only or home_mode == music_only_no_radios {
		/* Hides podcasts */

		section[data-testid="component-shelf"][aria-label="Episodes you might like"],
		section[data-testid="component-shelf"]:has(div[data-testid="grid-container"]) {
			display: none
		}
	}

	if home_mode == music_only_no_radios {
		/* Hides podcasts and radios */

		section[data-testid="component-shelf"][aria-label="Non-stop music based on your favorite songs and artists. Recommended Stations"] {
			display: none
		}
	}

	if home_mode == theos_preset {
		section[data-testid="component-shelf"][aria-label="Episodes you might like"],
		section[data-testid="component-shelf"][aria-label="Jump back in"],
		section[data-testid="component-shelf"][aria-label="Recently played"],
		section[data-testid="component-shelf"][aria-label="Inspired by your recent activity Based on your recent listening"],
		section[data-testid="component-shelf"]:has(a[href="/section/0JQ5DAnM3wGh0gz1MXnu3J"]),
		section[data-testid="component-shelf"][aria-label="Non-stop music based on your favorite songs and artists. Recommended Stations"],
		section[data-testid="component-shelf"][aria-label="Brand new music from artists you love. New releases for you"],
 		section[data-testid="component-shelf"]:has(div[data-testid="grid-container"]) {
			display: none
		}
	}

    if use_custom_theme_color {
		/* The (mostly useless) settings page */
		div[data-testid="settings-page"] label:has(input:checked) span {
			background-color: custom_theme_color!important
		}

		div[data-testid="settings-page"] label:has(input:checked) span span {
			background-color: white!important
		}

		/* Playerbar - fix icons being themed when they shouldn't be */
		button[data-testid="control-button-repeat"][aria-checked="false"] path {
			fill: custom_inactive_colour!important
		}

		button[aria-label*="Enable Shuffle"] svg path,
		button[aria-label*="Enable Shuffle"] span svg path * {
			fill: custom_inactive_colour!important;
			color: custom_inactive_colour!important
		}

		/* Progress bar and volume bar */
		div[data-testid="playback-progressbar"] div[data-testid="progress-bar"] div[data-testid="progress-bar-background"] div div,
 		aside[data-testid="now-playing-bar"] div[data-testid="volume-bar"] div div div[data-testid="progress-bar"] div[data-testid="progress-bar-background"] div div{
			background-color: custom_theme_color!important
		}

        .kWONUS,
        .dpREpp,
        .QavgDs_52SpJ2rw0LNYz,
        .fipMme,
        .Ar1CZ7qjPHuIJY0cI56W .btn,
        .iSbqnFdjb1SuyJ3uWydl .btn,
        .h4HgbO_Uu1JYg5UGANeQ .btn,
        .eSg4ntPU2KQLfpLGXAww .btn,
        .lro6AjUrZFH6zxjmOGg0 .encore-bright-accent-set, .encore-bright-accent-set, .SPC4uzYXJmknkCGKpxHw path,
 		button[data-testid="control-button-playpause"] span {
            background-color: custom_theme_color!important;
        }
        .Ar1CZ7qjPHuIJY0cI56W .btn {
            scale: 60%;
            filter: grayscale(1)
        }
        .iSbqnFdjb1SuyJ3uWydl .btn,
        .h4HgbO_Uu1JYg5UGANeQ .btn {
            scale: 60%!important
        }

		/* For those funny little square bars indicating the active tab */
		li a[aria-current="page"]::after {
			background-color: custom_theme_color!important
		}

        .K7fGF95OD9aI3zdYnFXg path,
        .ilmalU,
        .Xmv2oAnTB85QE4sqbK00 path,
        .RK45o6dbvO1mb0wQtSwq,
        .GlueDropTarget--episodes .KAZD28usA1vPz5GVpm63,
        .rRF_r7EyCHjZv058JACi path, .SPC4uzYXJmknkCGKpxHw path, .control-button-heart path, .volume-bar__icon-button .gQUQL, .NdVm10_yLWkkgq87jOMk path, .CCeu9OfWSwIAJqA49n84 path,
        .iSbqnFdjb1SuyJ3uWydl .UIBT7E6ZYMcSDl1KL62g,
        .NTJM_mh36C5kJ5oO8eac path, .I_aApN9pSlbGcpLtFQWw path,
        .Vz6yjzttS0YlLcwrkoUR .gQUQL, .KVKoQ3u4JpKTvSSFtd6J path,
        .fn72ari9aEmKo4JcwteT .gQUQL, .mnipjT4SLDMgwiDCEnRC path,
        .uWvwXlS0Da1bWsRX6KOw, .etChWo, .fn72ari9aEmKo4JcwteT path,
        .volume-bar__icon-button .ldgdZj, .o_wMyH9_LbAmIwlVqsF0 path,
        .cVy6fGx6QtJbCnID7XdB path, .Vz6yjzttS0YlLcwrkoUR .ldgdZj,
        .VpYFchIiPg3tPhBGyynT, .n5XwsUqagSoVk8oMiw1x, .hQUEHs, .bbVjXa,
        .mwpJrmCgLlVkJVtWjlI1 > .KAZD28usA1vPz5GVpm63 path,
        .volume-bar__icon-button path, .Vz6yjzttS0YlLcwrkoUR path,
        .FZhaXNtbN3Crwrgd0TA7 path, .jfwwWS.tGKwoPuvNBNK3TzCS5OH path, .tyZF5iwaJ6J5raHWkxwu,
        .DMWoYmJsYdFjGQbeGH9Q .dYnaPI,
        .control-button .kcUFwU,
        .hYdsxw .bneLcE,
        .gqJnng path,
        .gacXSA path,
        .control-button-feedback .dYnaPI,
        .dYnaPI,
        .Svg-sc-ytk21e-0, .kLkTcI, .cSWBDsMjkH62GXIXo6mQ,
        .hYdsxw .cAMMLk, .i_FRcsaqNCEJmoyObIP0,
        .active .encore-text-body-medium-bold, .hNvCMxbfz7HwgzLjt3IZ .encore-text-body-medium-bold,
        .w0nWe_59HwsG7nQLoibF,
 		.vW9NFcNIj8useE43Vx9G path,
		.bLLOzN.E1ikFpkPVaoLplbQdrTP path,
 		.KAZD28usA1vPz5GVpm63 path,
		.control-button .e-91000-baseline path,
		.ZbFkATBbLkWh2SHMXDt6 path,
		.z0zJ798TVq97lZgdRT2_ path,
 		.encore-internal-color-text-bright-accent,
 		.IZq_xBKdh88HLD4QY90X path,
 		.nozebc1PGSbzmePU25qY path,
		.Qt226Z4rBQs53aedRQBQ .fprjoI path,
 		path[d="M15.53 2.47a.75.75 0 0 1 0 1.06L4.907 14.153.47 9.716a.75.75 0 0 1 1.06-1.06l3.377 3.376L14.47 2.47a.75.75 0 0 1 1.06 0"],
  		button.niXChlbt7kxslMUdfwu9[aria-checked="true"][role="menuitemradio"],
 		path[d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m11.748-1.97a.75.75 0 0 0-1.06-1.06l-4.47 4.47-1.405-1.406a.75.75 0 1 0-1.061 1.06l2.466 2.467 5.53-5.53z"],

 		div[aria-label="Player controls"] button[aria-label="Previous"] path,
 		div[aria-label="Player controls"] button[aria-label="Next"] path,
		button[role="menuitemradio"][aria-checked="true"] {
            fill: custom_theme_color!important;
            color: custom_theme_color!important;
        }

		/* Uber fancy lyrics button hiding animation x3 */
		aside[data-testid="now-playing-bar"] button[data-testid="lyrics-button"] {
			opacity: 1;
			transition: all 1s ease-in-out;
		}

		aside[data-testid="now-playing-bar"] button[data-testid="lyrics-button"][aria-label="Looks like we don't have the lyrics for this song."] {
			opacity: 0;
			transition: all 1s ease-in-out;
		}

		/* Player bar right-side buttons */
		aside[data-testid="now-playing-bar"] button[data-testid="control-button-npv"] svg *,
		aside[data-testid="now-playing-bar"] button[data-testid="lyrics-button"] svg *,
		aside[data-testid="now-playing-bar"] button[data-testid="control-button-queue"] svg *,
		aside[data-testid="now-playing-bar"] button[aria-label="Connect to a device"] svg *,
		aside[data-testid="now-playing-bar"] button[data-testid="fullscreen-mode-button"] path,
		aside[data-testid="now-playing-bar"] div[data-testid="volume-bar"] button path {
			fill: custom_theme_color!important;
			color: custom_theme_color!important
		}

		/* Player bar right-side button dots */
		aside[data-testid="now-playing-bar"] button[data-testid="control-button-npv"]::after,
		aside[data-testid="now-playing-bar"] button[data-testid="lyrics-button"]::after,
		aside[data-testid="now-playing-bar"] button[data-testid="control-button-queue"]::after,
 		aside[data-testid="now-playing-bar"] button[aria-label="Connect to a device"]::after {
			background: custom_theme_color!important
		}

		.NKUrT1GciYXAEEUtagN1 .fprjoI path {
			fill: custom_theme_color
		}

        .vnCew8qzJq3cVGlYFXRI path {
            fill: black!important
        }

        .QavgDs_52SpJ2rw0LNYz {
            display: none
        }
        .N3juGUCH1EhEzmffNHAp {
            background: custom_theme_color!important;
            filter: brightness(0.7) contrast(1.5);
        }
        .tP0mccyU1WAa7I9PevC1 .uPxdw,
        .tP0mccyU1WAa7I9PevC1,
        .OF_3F0SQCsBtL1jSTlTA,
        .rRF_r7EyCHjZv058JACi .uPxdw {
            color: custom_theme_color!important;
            transition: all 0.5s
        }
        .rRF_r7EyCHjZv058JACi .uPxdw:hover {
            filter: brightness(1.2);
            scale: 1.1;
            transition: all 0.5s
        }
        .epWhU7hHGktzlO_dop6z {
            background: custom_theme_color;
        }

        /* Like Button */
        .vnCew8qzJq3cVGlYFXRI {
            background: custom_theme_color!important;
            transition: all 0.7s ease;
        }

        .vnCew8qzJq3cVGlYFXRI:hover {
            background: custom_theme_color!important;
            filter: brightness(1.2);
            scale: 1.1;
            transition: all 0.5s;
        }

        /* Active Track */
        .iSbqnFdjb1SuyJ3uWydl .t_yrXoUO3qGsJS4Y6iXX.standalone-ellipsis-one-line, .y6bXimbi8JAcblOFxTap .iTEtJB {
            color: custom_theme_color!important;
        }
        .fwTMCeAaUoWDj9WcQbgy path {
            fill: custom_theme_color;
        }
        .iSbqnFdjb1SuyJ3uWydl {
            background: ct_active_song;
        }

        /* Connected Device Screen */
        .Rpvqb, *[aria-label="Connect to a device"]::after, .hYdsxw::after {
            color: custom_theme_color!important;
        }

		.oCa5Np4laJc3s5P2uUqw * {
			color: custom_theme_color!important;
			top:1px;
			font-size:24px
		}

		.FpmhhFL8lCsiyh3X0fjK {
			display:none
		}

        .KAZD28usA1vPz5GVpm63.EHxL6K_6WWDlTCZP6x5w::after {
            background: custom_theme_color!important
        }

        .uWvwXlS0Da1bWsRX6KOw path,
        .uWvwXlS0Da1bWsRX6KOw,
        .INitzTSjokOMEJOc6P2H path,
        .IbmaxRtjqCjqTBpFwCgw svg, .WFRr38dFOxh75JyzSTj5 svg, .IbmaxRtjqCjqTBpFwCgw svg, *[aria-label="Connect to a device"]::after, .hYdsxw::after {
            fill: custom_theme_color!important;
        }

        div .WFRr38dFOxh75JyzSTj5, div .IbmaxRtjqCjqTBpFwCgw, .WFRr38dFOxh75JyzSTj5 .encore-bright-accent-set .IbmaxRtjqCjqTBpFwCgw {
            background:none!important;
            fill:none!important;
            color:none!important;
        }

        div[aria-labelledby="listrow-title-0abd29c122030303983590690a927ed6eb2d8003 listrow-subtitle-0abd29c122030303983590690a927ed6eb2d8003"]:hover, aria-labelledby="device-picker-section-heading ":hover, .RowButton-sc-xxkq4e-0 .hIehTT:hover {
            background:transparent!important
        }

        .KYkSwfV1FCtD15TMChbH {
            display:none
        }

        /* Toggles */
        input:checked ~ .Js64TOfWtHksI6TQ6knT {
        	background: custom_theme_color;
        }
    }

    if hide_recs {
        div[data-testid="recommended-track"]:has(div[data-testid="track-list"]),
 		button:has(div[aria-label="Find more songs or episodes for your playlist"]) {
            display: none
        }
    }

    if hide_spCon_bottom {
        .T3hkVxXuSbCYOD2GIeQd, .DOemiVbX4CbcfgSDqiiJ {
            display: none
        }
    }
}

@-moz-document domain("about-recommendations.spotify.com") {
    .tJeH2W2to1A7d9tWBRoi,
    #__next,
    .fLcSoX,
    body,
    .tJeH2W2to1A7d9tWBRoi {
        background: var(--background-colour)!important
    }

    if hide_sb==hidden {
        .os-scrollbar-vertical {
            display: none
        }
    }
    else {
        .os-scrollbar-vertical {
            width: 10px!important;
            border-radius: 5px 5px!important
        }
        if hide_sb==styled {
            .os-scrollbar-handle {
                border-radius: 5px 5px!important;
                if use_custom_theme_color {
                    background: custom_theme_color!important;
                    filter: opacity(0.5)!important
                }
            }
        }
    }
}
